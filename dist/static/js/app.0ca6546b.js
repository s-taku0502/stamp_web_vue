(()=>{"use strict";var e={250:(e,a,t)=>{var n=t(751),r=t(641),s=t(33);const l={id:"app"},o={class:"navbar"};function i(e,a,t,n,i,u){const d=(0,r.g2)("router-link"),c=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("header",null,[(0,r.Lk)("nav",o,[a[9]||(a[9]=(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("img",{id:"icon",src:"/assets/images/circle_app_icon.png",alt:"Logo"}),(0,r.Lk)("p",null,"額地区スタンプらり～")],-1)),(0,r.Lk)("div",{class:"menu-toggle",ref:"menuToggle",onClick:a[0]||(a[0]=(...e)=>n.toggleMenu&&n.toggleMenu(...e))},a[1]||(a[1]=[(0,r.Lk)("span",{class:"bar"},null,-1),(0,r.Lk)("span",{class:"bar"},null,-1),(0,r.Lk)("span",{class:"bar"},null,-1)]),512),(0,r.Lk)("ul",{class:(0,s.C4)(["nav-links",{active:n.isMenuActive}]),ref:"navLinks"},[(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/"},{default:(0,r.k6)((()=>a[2]||(a[2]=[(0,r.eW)("マイページ")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/home"},{default:(0,r.k6)((()=>a[3]||(a[3]=[(0,r.eW)("ホーム")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/scan"},{default:(0,r.k6)((()=>a[4]||(a[4]=[(0,r.eW)("スキャナー")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/current-stamps"},{default:(0,r.k6)((()=>a[5]||(a[5]=[(0,r.eW)("スタンプ")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/coupons"},{default:(0,r.k6)((()=>a[6]||(a[6]=[(0,r.eW)("クーポン")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/stores"},{default:(0,r.k6)((()=>a[7]||(a[7]=[(0,r.eW)("店舗情報")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(d,{to:"/contact"},{default:(0,r.k6)((()=>a[8]||(a[8]=[(0,r.eW)("お問い合わせ")]))),_:1})])],2)])]),(0,r.Lk)("main",null,[(0,r.bF)(c)]),a[10]||(a[10]=(0,r.Lk)("footer",null,[(0,r.Lk)("div",{class:"footer"},[(0,r.Lk)("p",null,"© 2024-2025 額地区スタンプらり～")])],-1))])}var u=t(953);const d={setup(){const e=(0,u.KR)(!1),a=(0,u.KR)(null),t=()=>{e.value=!e.value},n=()=>{e.value=!1};return(0,r.sV)((()=>{const e=a.value.querySelectorAll("li");e.forEach((e=>{e.addEventListener("click",n)}))})),(0,r.xo)((()=>{const e=a.value.querySelectorAll("li");e.forEach((e=>{e.removeEventListener("click",n)}))})),{isMenuActive:e,navLinks:a,toggleMenu:t,closeMenu:n}}};var c=t(433);const p=(0,c.A)(d,[["render",i],["__scopeId","data-v-488c7428"]]),m=p;var k=t(220),v=t(995);function h(e,a,t,n,s,l){const o=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",null,[a[0]||(a[0]=(0,r.Lk)("header",null,[(0,r.Lk)("nav",{class:"navbar"},[(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("img",{id:"icon",src:"/assets/images/circle_app_icon.png",alt:"Logo"}),(0,r.Lk)("p",null,"額地区スタンプらり～")])])],-1)),(0,r.Lk)("main",null,[(0,r.bF)(o)]),a[1]||(a[1]=(0,r.Lk)("footer",null,[(0,r.Lk)("div",{class:"footer"},[(0,r.Lk)("p",null,"© 2024-2025 額地区スタンプらり～")])],-1))])}const g={name:"RegisterLayout",setup(){const e=(0,u.KR)(!1),a=(0,u.KR)(null),t=()=>{e.value=!e.value},n=()=>{e.value=!1};return(0,r.sV)((()=>{const e=a.value.querySelectorAll("li");e.forEach((e=>{e.addEventListener("click",n)}))})),(0,r.xo)((()=>{const e=a.value.querySelectorAll("li");e.forEach((e=>{e.removeEventListener("click",n)}))})),{isMenuActive:e,navLinks:a,toggleMenu:t,closeMenu:n}}},b=(0,c.A)(g,[["render",h],["__scopeId","data-v-e3f85ad0"]]),y=b,L={class:"login"},f={key:0,class:"error-message"},w={class:"full-width"},_={class:"full-width"};function C(e,a,t,l,o,i){const u=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",L,[a[12]||(a[12]=(0,r.Lk)("h1",null,"ログイン",-1)),(0,r.Lk)("form",{onSubmit:a[2]||(a[2]=(0,n.D$)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[(0,r.Lk)("div",null,[a[3]||(a[3]=(0,r.Lk)("label",{for:"email"},"メールアドレス",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=e=>o.email=e),required:"",autocomplete:"email"},null,512),[[n.Jo,o.email]])]),(0,r.Lk)("div",null,[a[4]||(a[4]=(0,r.Lk)("label",{for:"password"},"パスワード",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>o.password=e),required:"",autocomplete:"current-password"},null,512),[[n.Jo,o.password]])]),a[5]||(a[5]=(0,r.Lk)("button",{type:"submit"},"ログイン",-1))],32),o.errorMessage?((0,r.uX)(),(0,r.CE)("p",f,(0,s.v_)(o.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",w,[a[7]||(a[7]=(0,r.eW)(" パスワードを忘れた場合は、")),(0,r.bF)(u,{to:"/contact"},{default:(0,r.k6)((()=>a[6]||(a[6]=[(0,r.eW)("こちら")]))),_:1}),a[8]||(a[8]=(0,r.eW)(" より再設定の申請をしてください。（再設定メールの送信に時間がかかる場合があります。） "))]),(0,r.Lk)("p",_,[a[10]||(a[10]=(0,r.eW)(" アカウントをお持ちでない場合は、")),(0,r.bF)(u,{to:"/register"},{default:(0,r.k6)((()=>a[9]||(a[9]=[(0,r.eW)("こちら")]))),_:1}),a[11]||(a[11]=(0,r.eW)(" より登録してください。 "))])])}var E=t(268);const S={name:"Login",data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){const e=(0,E.xI)();try{await(0,E.x9)(e,this.email,this.password),this.$router.push("/home")}catch(a){this.handleError(a)}},handleError(e){switch(counts+=1,e.code){case"auth/invalid-email":this.errorMessage="無効なメールアドレスです。";break;case"auth/user-disabled":this.errorMessage="このユーザーアカウントは無効化されています。";break;case"auth/user-not-found":this.errorMessage="ユーザーが見つかりません。";break;case"auth/wrong-password":this.errorMessage="パスワードが間違っています。";break;case"auth/invalid-credential":this.errorMessage="無効な認証情報です。再度ログインしてください。";default:this.errorMessage="ログインに失敗しました: "+e.message}counts}}},I=(0,c.A)(S,[["render",C],["__scopeId","data-v-6591b102"]]),W=I;function X(e,a,t,n,s,l){const o=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("main",null,[a[3]||(a[3]=(0,r.Lk)("p",null,"こちらは額地区デジタルスタンプらり～のホームページです。",-1)),(0,r.Lk)("p",null,[a[1]||(a[1]=(0,r.eW)("スタンプらり～を利用するには")),(0,r.bF)(o,{to:"/"},{default:(0,r.k6)((()=>a[0]||(a[0]=[(0,r.eW)("こちら")]))),_:1}),a[2]||(a[2]=(0,r.eW)("よりログインしてください。"))]),a[4]||(a[4]=(0,r.Lk)("p",{class:"attendance"},"※ログインユーザーはマイページを開きます。",-1))])}const q={name:"Home"},M=(0,c.A)(q,[["render",X],["__scopeId","data-v-7a239eda"]]),F=M,A={id:"Scan"};function x(e,a,t,n,l,o){const i=(0,r.g2)("qrcode-stream");return(0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("main",null,[a[1]||(a[1]=(0,r.Lk)("h1",null,"QRコードをスキャン",-1)),l.scanning?((0,r.uX)(),(0,r.Wv)(i,{key:0,onDetect:o.onDetect,class:"scanner"},null,8,["onDetect"])):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>o.toggleScanning&&o.toggleScanning(...e))},(0,s.v_)(l.scanning?"スキャン停止":"スキャン開始"),1)])])}var D=t(884),U=t(223),Q=t(922);const N={apiKey:"AIzaSyCX-MwBvHlOe8hKVWFq4CrisV0MKUHwJfY",authDomain:"kanazawa-nuka2024.firebaseapp.com",projectId:"kanazawa-nuka2024",storageBucket:"kanazawa-nuka2024.firebasestorage.app",messagingSenderId:"729877460278",appId:"1:729877460278:web:3e388b308f1d6ad0192f97",measurementId:"G-WZ2GHT12EV"},z=(0,U.Wp)(N),K=((0,Q.P5)(z),(0,E.xI)(z)),V=((0,D.aU)(z),{components:{QrcodeStream:v.tR},data(){return{scanning:!1}},methods:{async onDetect(e){if(e.includes("特定の文字列")){this.scanning=!1;const a=(0,D.aU)(),t=K.currentUser;if(t){const n=(0,D.rJ)(a,"stamps",t.uid,"userStamps");await(0,D.gS)(n,{scannedText:e,timestamp:new Date,imageUrl:"https://example.com/stamp.png"})}this.$router.push({name:"CurrentStamps"})}else alert("無効なQRコードです")},toggleScanning(){this.scanning=!this.scanning}}}),O=(0,c.A)(V,[["render",x],["__scopeId","data-v-ce0db81c"]]),T=O,j={id:"Coupons"};function J(e,a,t,n,s,l){const o=(0,r.g2)("v-col"),i=(0,r.g2)("v-row"),u=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.CE)("div",j,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>[(0,r.bF)(o)])),_:1})])),_:1})])}const R={name:"Coupons",data(){return{}},methods:{},computed:{}},H=(0,c.A)(R,[["render",J],["__scopeId","data-v-2e0c8074"]]),G=H,B={key:0},$={key:1};function P(e,a,t,n,l,o){const i=(0,r.g2)("SearchBar");return(0,r.uX)(),(0,r.CE)("div",null,[a[6]||(a[6]=(0,r.Lk)("h1",null,"Stores Page",-1)),(0,r.bF)(i,{searchQuery:l.searchQuery,"onUpdate:searchQuery":o.updateSearchQuery},null,8,["searchQuery","onUpdate:searchQuery"]),o.filteredStores.length>0?((0,r.uX)(),(0,r.CE)("div",B,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredStores,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"store-info"},[(0,r.Lk)("h2",null,(0,s.v_)(e.name),1),(0,r.Lk)("p",null,[a[0]||(a[0]=(0,r.Lk)("strong",null,"住所:",-1)),(0,r.eW)(" "+(0,s.v_)(e.address),1)]),(0,r.Lk)("p",null,[a[1]||(a[1]=(0,r.Lk)("strong",null,"営業時間:",-1)),(0,r.eW)(" "+(0,s.v_)(e.hours),1)]),(0,r.Lk)("p",null,[a[2]||(a[2]=(0,r.Lk)("strong",null,"連絡先:",-1)),(0,r.eW)(" "+(0,s.v_)(e.contact),1)]),(0,r.Lk)("p",null,[a[3]||(a[3]=(0,r.Lk)("strong",null,"特徴:",-1)),(0,r.eW)(" "+(0,s.v_)(e.features),1)]),(0,r.Lk)("p",null,[a[4]||(a[4]=(0,r.Lk)("strong",null,"スタンプラリー特典:",-1)),(0,r.eW)(" "+(0,s.v_)(e.reward),1)])])))),128))])):((0,r.uX)(),(0,r.CE)("div",$,a[5]||(a[5]=[(0,r.Lk)("p",null,"店舗が見つかりませんでした。",-1)])))])}const Y=["value"];function Z(e,a,t,n,s,l){return(0,r.uX)(),(0,r.CE)("input",{value:t.searchQuery,onInput:a[0]||(a[0]=a=>e.$emit("update:searchQuery",a.target.value)),type:"text",placeholder:"店舗名・住所で検索",class:"search-bar"},null,40,Y)}const ee={name:"SearchBar",props:{searchQuery:{type:String,default:""}}},ae=(0,c.A)(ee,[["render",Z],["__scopeId","data-v-fbab35d2"]]),te=ae,ne={name:"Stores",components:{SearchBar:te},data(){return{searchQuery:"",stores:[{name:"店舗A",address:"東京都渋谷区1-2-3",hours:"10:00～18:00（定休日：水曜日）",contact:"03-1234-5678",features:"オリジナル商品を取り扱い",reward:"スタンプ1つで10%割引",keywords:["てんぽえー","てんぽA","とうきょうとしぶやく"]},{name:"店舗B",address:"大阪府大阪市北区4-5-6",hours:"9:00～17:00（定休日：火曜日）",contact:"06-9876-5432",features:"地元の特産品を販売",reward:"スタンプ1つで無料ドリンク",keywords:["おおさか","おおさかしきた"]}]}},computed:{filteredStores(){const e=(this.searchQuery||"").toLowerCase();return""===e?this.stores:this.stores.filter((a=>{const t=a.name.toLowerCase(),n=a.address.toLowerCase(),r=a.keywords.map((e=>e.toLowerCase()));return t.includes(e)||n.includes(e)||r.some((a=>a.includes(e)))}))}},methods:{updateSearchQuery(e){this.searchQuery=e}}},re=(0,c.A)(ne,[["render",P],["__scopeId","data-v-7ebd069a"]]),se=re,le={id:"contact-form",method:"post",action:"https://script.google.com/macros/s/AKfycbypfud-gElSNTgIhY4HnjnLu2cs9YNvFgUgnc9-cExUifcRtatjmLeSGf32Hw_39W8HMA/exec"},oe={key:0},ie={key:1},ue={key:2};function de(e,a,t,s,l,o){const i=(0,r.g2)("attendance");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("main",null,[(0,r.Lk)("form",le,[a[7]||(a[7]=(0,r.Lk)("label",{for:"inquiry-type"},[(0,r.eW)(" お問い合わせ内容をお選びください。 "),(0,r.Lk)("span",{style:{color:"red"}}," *"),(0,r.Lk)("span",{class:"error-message"},"この質問は必須です。")],-1)),(0,r.bo)((0,r.Lk)("select",{id:"inquiry-type",name:"inquiry-type","onUpdate:modelValue":a[0]||(a[0]=e=>l.inquiryType=e),required:""},a[1]||(a[1]=[(0,r.Fv)('<option value="" disabled selected data-v-107bd724>選択</option><option value="パスワード再設定" data-v-107bd724>パスワードを忘れた</option><option value="スタンプらり～情報" data-v-107bd724>スタンプらり～に関するお問い合わせ</option><option value="出店情報" data-v-107bd724>会員の出店について</option><option value="活動情報" data-v-107bd724>活動に関するお問い合わせ</option><option value="個人情報" data-v-107bd724>個人情報に関するお問い合わせ</option><option value="意見・要望" data-v-107bd724>当ウェブサイトへのご意見・ご要望</option><option value="その他" data-v-107bd724>その他</option>',8)]),512),[[n.u1,l.inquiryType]]),"パスワード再設定"===l.inquiryType?((0,r.uX)(),(0,r.CE)("div",oe,a[2]||(a[2]=[(0,r.Lk)("label",{for:"email"},[(0,r.eW)("メールアドレス"),(0,r.Lk)("span",{style:{color:"red"}}," *"),(0,r.Lk)("p",null,"主催団体より連絡させていただく場合がございます。")],-1),(0,r.Lk)("input",{type:"email",id:"email",name:"email",placeholder:"例）nuka@sample.com",required:""},null,-1)]))):"その他"===l.inquiryType?((0,r.uX)(),(0,r.CE)("div",ie,a[3]||(a[3]=[(0,r.Fv)('<label for="inquiry-details" data-v-107bd724>お問い合わせ内容をお書きください。<span style="color:red;" data-v-107bd724> *</span></label><p style="color:red;" data-v-107bd724><a href="https://www4.city.kanazawa.lg.jp/soshikikarasagasu/zeimuka/gyomuannai/2/6/4325.html" target="_blank" data-v-107bd724>金沢市へのお問い合わせはこちら</a></p><textarea id="inquiry-details" name="inquiry-details" rows="4" required data-v-107bd724></textarea><label for="urgent" data-v-107bd724> 至急の内容の場合は☑を入れてください。 <input type="checkbox" id="urgent" name="urgent" value="至急" data-v-107bd724></label><hr data-v-107bd724><label for="name" data-v-107bd724>氏名<span style="color:red;" data-v-107bd724> *</span></label><input type="text" id="name" name="name" placeholder="額　太郎" required data-v-107bd724><label for="email" data-v-107bd724>メールアドレス<span style="color:red;" data-v-107bd724> *</span><p data-v-107bd724>主催団体より連絡させていただく場合がございます。</p></label><input type="email" id="email" name="email" placeholder="例）nuka@sample.com" required data-v-107bd724><label for="organization" data-v-107bd724>所属</label><input type="text" id="organization" name="organization" placeholder="回答を入力" data-v-107bd724><label for="phone" data-v-107bd724>お電話番号</label><input type="tel" id="phone" name="phone" placeholder="回答を入力" data-v-107bd724>',13)]))):((0,r.uX)(),(0,r.CE)("div",ue,[a[5]||(a[5]=(0,r.Lk)("label",{for:"inquiry-details"},[(0,r.eW)("お問い合わせ内容をお書きください。"),(0,r.Lk)("span",{style:{color:"red"}}," *")],-1)),(0,r.bF)(i,null,{default:(0,r.k6)((()=>a[4]||(a[4]=[(0,r.eW)("項目によって記入内容が異なります。")]))),_:1}),a[6]||(a[6]=(0,r.Fv)('<textarea id="inquiry-details" name="inquiry-details" rows="4" required data-v-107bd724></textarea><label for="urgent" data-v-107bd724> 至急の内容の場合は☑を入れてください。 <input type="checkbox" id="urgent" name="urgent" value="至急" data-v-107bd724></label><hr data-v-107bd724><label for="name" data-v-107bd724>氏名<span style="color:red;" data-v-107bd724> *</span></label><input type="text" id="name" name="name" placeholder="額　太郎" required data-v-107bd724><label for="email" data-v-107bd724>メールアドレス<span style="color:red;" data-v-107bd724> *</span><p data-v-107bd724>主催団体より連絡させていただく場合がございます。</p></label><input type="email" id="email" name="email" placeholder="例）nuka@sample.com" required data-v-107bd724><label for="organization" data-v-107bd724>所属</label><input type="text" id="organization" name="organization" placeholder="回答を入力" data-v-107bd724><label for="phone" data-v-107bd724>お電話番号</label><input type="tel" id="phone" name="phone" placeholder="回答を入力" data-v-107bd724>',11))])),a[8]||(a[8]=(0,r.Lk)("div",{class:"button-group"},[(0,r.Lk)("button",{type:"submit"},"送信"),(0,r.Lk)("button",{type:"reset"},"フォームをクリア")],-1))])])])}const ce={name:"Contact",data(){return{inquiryType:""}}},pe=(0,c.A)(ce,[["render",de],["__scopeId","data-v-107bd724"]]),me=pe,ke={class:"register",id:"register"},ve={key:0,class:"warning"},he=["disabled"],ge={key:0},be={key:1},ye={key:0,class:"error"};function Le(e,a,t,l,o,i){const u=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ke,[a[7]||(a[7]=(0,r.Lk)("h1",null,"登録画面",-1)),(0,r.Lk)("form",{onSubmit:a[2]||(a[2]=(0,n.D$)(((...e)=>i.register&&i.register(...e)),["prevent"]))},[(0,r.Lk)("div",null,[a[3]||(a[3]=(0,r.Lk)("label",{for:"email"},"メールアドレス",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>o.email=e),required:""},null,512),[[n.Jo,o.email]])]),(0,r.Lk)("div",null,[a[4]||(a[4]=(0,r.Lk)("label",{for:"password"},"パスワード",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>o.password=e),required:""},null,512),[[n.Jo,o.password]]),o.password&&o.password.length>0&&o.password.length<6?((0,r.uX)(),(0,r.CE)("p",ve," 6文字以上のパスワードを入力してください。 ")):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{type:"submit",disabled:o.isLoading||o.password.length<6},[o.isLoading?((0,r.uX)(),(0,r.CE)("span",ge,"登録中...")):((0,r.uX)(),(0,r.CE)("span",be,"登録"))],8,he)],32),o.errorMessage?((0,r.uX)(),(0,r.CE)("p",ye,(0,s.v_)(o.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",null,[a[6]||(a[6]=(0,r.eW)(" すでにアカウントをお持ちですか？ ")),(0,r.bF)(u,{to:"/login"},{default:(0,r.k6)((()=>a[5]||(a[5]=[(0,r.eW)("ログインはこちら")]))),_:1})])])}const fe={name:"Register",data(){return{email:"",password:"",errorMessage:null,isLoading:!1}},methods:{async register(){this.isLoading=!0;try{this.errorMessage=null;const e=await(0,E.eJ)(K,this.email,this.password);console.log("登録成功:",e.user),alert("登録が成功しました！"),this.$router.push("/login"),this.email="",this.password=""}catch(e){console.error("登録エラー:",e),"auth/email-already-in-use"===e.code?this.errorMessage="このメールアドレスはすでに登録されています。":"auth/invalid-email"===e.code?this.errorMessage="無効なメールアドレスです。":"auth/weak-password"===e.code?this.errorMessage="パスワードは6文字以上である必要があります。":this.errorMessage="予期しないエラーが発生しました。"}finally{this.isLoading=!1}}}},we=(0,c.A)(fe,[["render",Le],["__scopeId","data-v-5e29cd9d"]]),_e=we;function Ce(e,a,t,n,s,l){return(0,r.uX)(),(0,r.CE)("main",null,a[0]||(a[0]=[(0,r.Lk)("h1",null,"404 Not Found",-1),(0,r.Lk)("p",null,"お探しのページが見つかりませんでした。",-1)]))}const Ee={name:"NotFound"},Se=(0,c.A)(Ee,[["render",Ce],["__scopeId","data-v-ef9cad84"]]),Ie=Se,We={key:0},Xe={class:"stamps-container"},qe=["src"];function Me(e,a,t,n,l,o){return(0,r.uX)(),(0,r.CE)("div",null,[a[1]||(a[1]=(0,r.Lk)("h1",null,"これまでの期間に取得したスタンプ",-1)),l.stamps.length>0?((0,r.uX)(),(0,r.CE)("div",We,[a[0]||(a[0]=(0,r.Lk)("h2",null,"取得したスタンプ",-1)),(0,r.Lk)("div",Xe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.stamps,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"stamp"},[(0,r.Lk)("img",{src:e.imageUrl,alt:"Stamp Image"},null,8,qe),(0,r.Lk)("p",null,(0,s.v_)(e.timestamp.toDate().toLocaleString()),1)])))),128))])])):(0,r.Q3)("",!0)])}const Fe={name:"AllStamps",data(){return{stamps:[]}},methods:{async fetchStamps(){const e=(0,D.aU)(),a=K.currentUser;if(a){const t=(0,D.rJ)(e,"stamps",a.uid,"userStamps"),n=await(0,D.GG)(t);this.stamps=n.docs.map((e=>e.data()))}}},created(){this.fetchStamps()}},Ae=(0,c.A)(Fe,[["render",Me],["__scopeId","data-v-dc5133de"]]),xe=Ae,De={key:0},Ue={class:"stamps-container"},Qe=["src"];function Ne(e,a,t,n,l,o){return(0,r.uX)(),(0,r.CE)("div",null,[a[1]||(a[1]=(0,r.Lk)("h1",null,"イベント期間中のスタンプ",-1)),l.stamps.length>0?((0,r.uX)(),(0,r.CE)("div",De,[a[0]||(a[0]=(0,r.Lk)("h2",null,"取得したスタンプ",-1)),(0,r.Lk)("div",Ue,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.stamps,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"stamp"},[(0,r.Lk)("img",{src:e.imageUrl,alt:"Stamp Image"},null,8,Qe),(0,r.Lk)("p",null,(0,s.v_)(e.timestamp.toDate().toLocaleString()),1)])))),128))])])):(0,r.Q3)("",!0)])}const ze={name:"CurrentStamps",data(){return{stamps:[],eventStartDate:new Date("2023-01-01"),eventEndDate:new Date("2023-12-31")}},methods:{async fetchStamps(){const e=(0,D.aU)(),a=K.currentUser;if(a){const t=(0,D.rJ)(e,"stamps",a.uid,"userStamps"),n=(0,D.P)(t,(0,D._M)("timestamp",">=",this.eventStartDate),(0,D._M)("timestamp","<=",this.eventEndDate)),r=await(0,D.GG)(n);this.stamps=r.docs.map((e=>e.data()))}}},created(){this.fetchStamps()}},Ke=(0,c.A)(ze,[["render",Ne],["__scopeId","data-v-6f4cd704"]]),Ve=Ke,Oe={class:"user-profile"},Te={key:0,class:"profile-info"},je={key:1},Je={class:"update-username"};function Re(e,a,t,l,o,i){return(0,r.uX)(),(0,r.CE)("div",Oe,[a[6]||(a[6]=(0,r.Lk)("h1",null,"マイページ",-1)),o.user?((0,r.uX)(),(0,r.CE)("div",Te,[(0,r.Lk)("p",null,[a[3]||(a[3]=(0,r.Lk)("strong",null,"ユーザー名:",-1)),(0,r.eW)(" "+(0,s.v_)(o.user.displayName),1)]),(0,r.Lk)("p",null,[a[4]||(a[4]=(0,r.Lk)("strong",null,"メールアドレス:",-1)),(0,r.eW)(" "+(0,s.v_)(o.user.email),1)])])):((0,r.uX)(),(0,r.CE)("div",je,a[5]||(a[5]=[(0,r.Lk)("p",null,"ユーザー情報を取得できませんでした。",-1)]))),(0,r.Lk)("div",Je,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.newDisplayName=e),placeholder:"新しいユーザー名"},null,512),[[n.Jo,o.newDisplayName]]),(0,r.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>i.updateDisplayName&&i.updateDisplayName(...e))},"ユーザー名を変更")]),(0,r.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>i.logout&&i.logout(...e))},"ログアウト")])}const He={name:"UserProfile",data(){return{user:null,newDisplayName:""}},created(){const e=(0,E.xI)();this.user=e.currentUser,this.user||this.$router.push("/login")},methods:{async updateDisplayName(){const e=(0,E.xI)(),a=e.currentUser;if(a&&this.newDisplayName)try{await(0,E.r7)(a,{displayName:this.newDisplayName}),this.user={...a,displayName:this.newDisplayName},alert("ユーザー名が更新されました")}catch(t){alert("ユーザー名の更新に失敗しました: "+t.message)}},async logout(){const e=(0,E.xI)();try{await(0,E.CI)(e),this.$router.push("/login")}catch(a){alert("ログアウトに失敗しました: "+a.message)}}}},Ge=(0,c.A)(He,[["render",Re],["__scopeId","data-v-71867eb9"]]),Be=Ge,$e=[{path:"/",name:"マイページ",component:Be},{path:"/home",name:"ホーム",component:F},{path:"/scan",name:"スキャン画面",component:T,props:e=>({onScanComplete:e.query.onScanComplete})},{path:"/current-stamps",name:"開催中のスタンプ",component:Ve},{path:"/all-stamps",name:"過去のスタンプ",component:xe},{path:"/coupons",name:"クーポン画面",component:G},{path:"/stores",name:"店舗一覧",component:se},{path:"/contact",name:"お問い合わせ",component:me},,{path:"/register",name:"新規登録",component:_e,meta:{layout:y}},{path:"/login",name:"ログイン画面",component:W,meta:{layout:y}},{path:"/:catchAll(.*)",name:"404NotFound",component:Ie}],Pe=(0,k.aE)({history:(0,k.LA)("/"),routes:$e}),Ye=Pe,Ze={apiKey:"AIzaSyCX-MwBvHlOe8hKVWFq4CrisV0MKUHwJfY",authDomain:"kanazawa-nuka2024.firebaseapp.com",projectId:"kanazawa-nuka2024",storageBucket:"kanazawa-nuka2024.firebasestorage.app",messagingSenderId:"729877460278",appId:"1:729877460278:web:3e388b308f1d6ad0192f97",measurementId:"G-WZ2GHT12EV"},ea=(0,U.Wp)(Ze),aa=((0,Q.P5)(ea),(0,E.xI)(ea),(0,D.aU)(ea),(0,n.Ef)(m));aa.component("RegisterLayout",y),aa.use(Ye),aa.mount("#app")}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var s=a[n]={exports:{}};return e[n](s,s.exports,t),s.exports}t.m=e,(()=>{var e=[];t.O=(a,n,r,s)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,r,s]=e[d],o=!0,i=0;i<n.length;i++)(!1&s||l>=s)&&Object.keys(t.O).every((e=>t.O[e](n[i])))?n.splice(i--,1):(o=!1,s<l&&(l=s));if(o){e.splice(d--,1);var u=r();void 0!==u&&(a=u)}}return a}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]}})(),(()=>{t.d=(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={524:0};t.O.j=a=>0===e[a];var a=(a,n)=>{var r,s,[l,o,i]=n,u=0;if(l.some((a=>0!==e[a]))){for(r in o)t.o(o,r)&&(t.m[r]=o[r]);if(i)var d=i(t)}for(a&&a(n);u<l.length;u++)s=l[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(d)},n=self["webpackChunkstamp_web"]=self["webpackChunkstamp_web"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))})();var n=t.O(void 0,[504],(()=>t(250)));n=t.O(n)})();
//# sourceMappingURL=app.0ca6546b.js.map